@startuml
title Système de réputation Influx Link - Détail

actor "Influenceur" as I
actor "Marque" as M
participant "Front" as UI
participant "API XP" as API
participant "Algorithme Pondération" as ALGO
database "DB Réputation" as DB
participant "Service Modération" as MOD
participant "Service Audit" as AUDIT

UI -> API : Action / Feedback (post)
API -> DB : Enregistrer événement brut
API -> ALGO : Envoi lot d'événements
ALGO -> ALGO : Calcul pondéré (poids votant, corrélations, cooldowns)
ALGO -> DB : Mise à jour score & logs
ALGO -> AUDIT : Si anomalie -> enregistrement + alerte
AUDIT -> MOD : Dossier d'audit (si examen humain requis)
MOD -> DB : Correction / validation / sanction
DB -> API : Retour score & niveau
API -> UI : Mise à jour visibilité / notifications

note left of ALGO
Règles principales :
- Pondération = f(XP_votant, vérification, fréquence_signaux)
- Cooldowns pour gains/pertes
- Plafonds journaliers / mensuels
end note

@enduml
